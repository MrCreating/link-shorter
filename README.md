# link-shorter
Небольшое приложение для сокращения ссылок.

# Запуск
1. Создайте базу данных `links` в MySQL
2. Создайте в этой БД таблицу `data` с полями: 
    * `id - BIGINT AUTOINCREMENT PRIMARY KEY`
    * `query - TEXT`
    * `url - TEXT`
3. Отредактируйте файл `config.json`, указав в нём:
    * `domain` - строка, это то, что будет отдаваться в сокращённой ссылке, указывается вместе с протоколом передачи данных и портом (если не 80 и не 443).
    * `port` - число, порт для запуска сервера
    * `host` - строка, адрес для подключения к MySQL
    * `user` - строка, пользователь MySQL
    * `password` - строка, пароль MySQL
    * `ssl_cert` - строка, путь к файлу SSL-сертификата, необязательно
    * `ssl_key` - строка, путь к файлу SSL-ключа, необязательно
4. Запустите файл `index.js` перейдите по вашему домену/IP и указанному порту. Должно открыться окно с предложением сокращения ссылки.

# API-функции
* `LinkShorter(config = null, databaseConnection = null, cacheConnection = null)` - конструктор класса `LinkShorter`, принимает параметры:
    * `config` - Объект из config.json (Необязательно, если переданы следующие 2 параметра)
    * `databaseConnection` - Объект текущего подключения к БД (Необязательно, будет открыто новое)
    * `cacheConnection` - Объект подключения к Memcached (Необязательно, подключится самостоятельно)
* `LinkShorter.createLink(neededUrl, readableUrl)` - создаёт QUERY, который нужно присоединить к домену для получения сокращённой ссылки, принимает параметры:
    * `neededUrl` - строка, ссылка, которую нужно сократить
    * `readableUrl` - строка, необязательный параметр, который будет в роли сокращённой ссылки
* `LinkShorter.getLink(query)` - получает оригинальную ссылку по QUERY, принимает параметры
    * `query` - строка, сокращённая ссылка без домена

# Рабочий пример доступен на https://yunnet.ru:7575/
